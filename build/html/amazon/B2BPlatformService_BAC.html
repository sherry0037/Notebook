


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>B2BPlatformService and BusinessAccountConsole &#8212; Notebook  documentation</title>
    <link rel="stylesheet" href="../_static/yeen.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Notebook  documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">B2BPlatformService and BusinessAccountConsole</a><ul>
<li><a class="reference internal" href="#b2bplatformservice">B2BPlatformService</a></li>
<li><a class="reference internal" href="#error">Error</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/amazon/B2BPlatformService_BAC.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="b2bplatformservice-and-businessaccountconsole">
<h1>B2BPlatformService and BusinessAccountConsole<a class="headerlink" href="#b2bplatformservice-and-businessaccountconsole" title="Permalink to this headline">¶</a></h1>
<div class="section" id="b2bplatformservice">
<h2>B2BPlatformService<a class="headerlink" href="#b2bplatformservice" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><dl class="simple">
<dt>Install IntelliJ</dt><dd><ol class="arabic simple">
<li><p>Install toolbox <a class="reference external" href="https://w.amazon.com/index.php/BuilderToolbox/GettingStarted#Install_Toolbox">https://w.amazon.com/index.php/BuilderToolbox/GettingStarted#Install_Toolbox</a></p></li>
<li><p>Install BrazilCLI 2.0</p></li>
<li><p>Install crux</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>Set up the Black Caiman IntelliJ plugin</p></li>
<li><p>Set up NinjaDevSync between your laptop and cloud developer desktop.</p></li>
<li><p>Set up B2BDevelopmentService <a class="reference external" href="https://w.amazon.com/index.php/BISS/Development/Projects/B2BPlatformService/DevelopmentSetup">https://w.amazon.com/index.php/BISS/Development/Projects/B2BPlatformService/DevelopmentSetup</a></p>
<blockquote>
<div><ol class="arabic simple">
<li><dl class="simple">
<dt>Create a local workspace for the B2BPlatformService brazil package using version set B2BPlatformService/development</dt><dd><p>cd /workplace/niyixuan/B2BPlatformService
brazil ws –create –name niyixuan-B2BPlatformService –root /workplace/niyixuan/B2BPlatformService –vs B2BPlatformService/development</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Pull packages:</dt><dd><ol class="arabic simple">
<li><p>brazil ws use -p BusinessAccountConsole –branch mainline</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>To build all packages in your workspace at once, navigate to the top level package (B2BPlatformService in this case) and run:</dt><dd><p>brazil-recursive-cmd-parallel “brazil-build”
brazil-recursive-cmd -all brazil-build</p>
</dd>
</dl>
</li>
</ol>
<ol class="arabic simple" start="2">
<li><p>Child environment: <a class="reference external" href="https://apollo.amazon.com/environments/B2BPlatformServiceAAAShim/niyixuan">https://apollo.amazon.com/environments/B2BPlatformServiceAAAShim/niyixuan</a></p></li>
<li><p>Pipeline: <a class="reference external" href="https://pipelines.amazon.com/pipelines/B2BPlatformServiceAAAShim">https://pipelines.amazon.com/pipelines/B2BPlatformServiceAAAShim</a></p></li>
</ol>
</div></blockquote>
</li>
<li><p>Configure RDE using the instructions found on the wiki</p></li>
<li><dl class="simple">
<dt>Set up BusinessAccountConsole</dt><dd><ol class="arabic simple">
<li><p>Create 1-click child environment: <a class="reference external" href="https://apollo.amazon.com/environments/BusinessAccountConsole/US/stages/Prod">https://apollo.amazon.com/environments/BusinessAccountConsole/US/stages/Prod</a></p></li>
<li><p>Child environment: <a class="reference external" href="https://apollo.amazon.com/environments/BusinessAccountConsole/US/niyixuan/">https://apollo.amazon.com/environments/BusinessAccountConsole/US/niyixuan/</a></p></li>
<li><dl class="simple">
<dt>Set the Apache OP Config httpServerName to your CNAME (e.g. weberd.aka.corp.amazon.com)</dt><dd><ol class="arabic simple">
<li><p>httpExternalRegularPort 3080</p></li>
<li><p>httpExternalSecurePort 3043</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Create a Beta stage</dt><dd><ol class="arabic simple">
<li><p>Hosts and Hostclasses: DEV-DSK-NIYIXUAN</p></li>
<li><p>Network Location: PDX/corp</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>Deployment: sync from Beta</p></li>
<li><dl class="simple">
<dt>release build</dt><dd><ol class="arabic simple">
<li><p>cd src/BusinessAccountConcole</p></li>
<li><p>brazil-build release</p></li>
</ol>
</dd>
</dl>
</li>
</ol>
</dd>
</dl>
</li>
<li><p>Run rde wflow run to start everything up</p></li>
<li><p>Visit your RDE console at <a class="reference external" href="http://niyixuan.aka.corp.amazon.com:5143/">http://niyixuan.aka.corp.amazon.com:5143/</a></p></li>
</ol>
<p>KeyMasterDaemon/Prod version 532825159 will be included with this deployment. Undo
AAASecurityDaemon/Prod version 501127889 will be included with this deployment. Undo</p>
<p><a class="reference external" href="https://niyixuan.aka.corp.amazon.com:5143/">https://niyixuan.aka.corp.amazon.com:5143/</a></p>
<p>rde stack stop BusinessAccountConsole</p>
</div>
<div class="section" id="error">
<h2>Error<a class="headerlink" href="#error" title="Permalink to this headline">¶</a></h2>
<p>[22:01:12-E] failed to start personal stack</p>
<p>Details:</p>
<blockquote>
<div><p>failed to start development stack
1 job(s) execution failed
failed to setup network mapping for app “BusinessAccountConsole”
error occurred while setting up endpoints for app BusinessAccountConsole
failed to setup and start container for endpoint “debug”
failed to start container for endpoint “debug”
API error (500)
{“message”:”driver failed programming external connectivity on endpoint debug (581b0fd7d3e825d3301ceae2e1b1b2efe07405c3c605f28b05cc7424bcc20794)
Error starting userland proxy
listen tcp 127.0.0.1:3083
bind
address already in use”}</p>
</div></blockquote>
<p>Solution:
netstat -nalp | grep 3083</p>
<dl class="simple">
<dt>(Not all processes could be identified, non-owned process info</dt><dd><p>will not be shown, you would have to be root to see it all.)</p>
</dd>
</dl>
<p>tcp        0      0 127.0.0.1:3083              0.0.0.0:*                   LISTEN      26060/jsvc.exec</p>
<p>ps -ef | grep 26060</p>
<p>apolloRun -e BusinessAccountConsole -a Deactivate
rde stack stop BusinessAccountConsole</p>
<p>If not working after changing the DNF:
rde stack exec BusinessAccountConsole bash
/apollo/env/BusinessAccountConsole/var/output/logs</p>
<p>less definition.yaml</p>
<p>Check DNS:
Ping/dig niyixuan.aka.corp.amazon.com</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Notebook  documentation</a> &#187;</li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Yixuan Ni.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.1.
    </div>
    

  </body>
</html>